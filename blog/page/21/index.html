
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>胡凯</title>
  <meta name="author" content="HuKai">

  
  <meta name="description" content="Redundant Downloads are Redundant[重复下载是冗余的] 减少下载的最基本方法是仅仅下载那些你需要的。从数据的角度看，我们可以通过传递类似上次更新时间这样的参数来制定查询数据的条件。同样，在下载图片的时候，server那边最好能够减少图片的大小， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://hukai.me/blog/page/21/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

  <!--
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  -->
  <link href="/atom.xml" rel="alternate" title="胡凯" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--Mark by @Kesen-->
<!-- <link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"> -->

  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-37679268-1', 'auto');
    ga('send', 'pageview');

  </script>



</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">胡凯</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:hukai.me" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">首页</a></li>
  <li><a href="/blog/archives">存档</a></li>
  <li><a href="/android-training-course-in-chinese/index.html">Android官方培训课程</a></li>
  <li><a href="/about/me.html">关于胡凯</a></li>
  <li><a href="/about/friends.html">友情链接</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/android-training-transferring-data-without-draining-the-battery-lesson-3/">Android Training - 优化下载效率(Lesson 3 - 使用缓存来避免重复下载)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-26T17:59:00+08:00" pubdate data-updated="true">Mar 26<span>th</span>, 2012</time>
        
         | <a href="/android-training-transferring-data-without-draining-the-battery-lesson-3/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Redundant Downloads are Redundant[重复下载是冗余的]</h2>

<p>减少下载的最基本方法是仅仅下载那些你需要的。从数据的角度看，我们可以通过传递类似上次更新时间这样的参数来制定查询数据的条件。同样，在下载图片的时候，server那边最好能够减少图片的大小，而不是让我们下载完整大小的图片。</p>

<h2>1.Cache Files Locally[缓存文件到本地]</h2>

<p>避免下载重复的数据是很重要的。可以使用缓存机制来处理这个问题。缓存static的资源，例如完整的图片。这些缓存的资源需要分开存放。为了保证app不会因为缓存而导致显示的是旧数据，请从缓存中获取最新的数据，当数据过期的时候，会提示进行刷新。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/android-training-transferring-data-without-draining-the-battery-lesson-3/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/android-training-transferring-data-without-draining-the-battery-lesson-2/">Android Training - 优化下载效率(Lesson 2 - 调整更新的频率[C2DM与退避算法])</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-26T16:51:00+08:00" pubdate data-updated="true">Mar 26<span>th</span>, 2012</time>
        
         | <a href="/android-training-transferring-data-without-draining-the-battery-lesson-2/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Minimizing the Effect of Regular Updates[最小化定期更新操作的副作用]</h2>

<p>最佳的定时更新频率是不确定的，通常由设备状态，网络连接状态，用户行为与用户定义明确的偏好而决定。</p>

<p><a href="http://developer.android.com/training/monitoring-device-state/index.html">Optimizing Battery Life</a>这一章有讨论如何根据设备状态来修改更新频率。里面介绍了当断开网络连接的时候去关闭后台服务，在电量比较低的时候减少更新的频率。</p>

<p>这一课会介绍更新频率是多少才会使得更新操作对无线电状态机的影响最小。(C2DM与指数退避算法的使用)</p>

<h2>Use Google Cloud Messaging as an Alternative to Polling[使用C2DM作为轮询方式之一]</h2>

<p>关于<code>Android Cloud to Device Messaging</code> (C2DM)详情 ,请参考:<a href="http://code.google.com/intl/zh-CN/android/c2dm/">http://code.google.com/intl/zh-CN/android/c2dm/</a></p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/android-training-transferring-data-without-draining-the-battery-lesson-2/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/android-training-transferring-data-without-draining-the-battery-lesson-4/">Android Training - 优化下载效率(Lesson 4 - 根据网络类型来切换下载模式)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-26T00:00:00+08:00" pubdate data-updated="true">Mar 26<span>th</span>, 2012</time>
        
         | <a href="/android-training-transferring-data-without-draining-the-battery-lesson-4/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Modifying your Download Patterns Based on the Connectivity Type</h2>

<p>并不是所有的网络类型(Wi-Fi,3G,2G,etc)对电量的消耗是同等的。不仅仅Wi-Fi电波比无线电波消耗的电量要少很多，而且不同的无线电波(3G,2G,LTE……)也存在使用不同电量的区别。</p>

<h2>1.Use Wi-Fi[使用Wi-Fi]</h2>

<p>在大多数情况下，Wi-Fi电波会在使用相对较低的电量的情况下提供一个相对较大的带宽。因此，我们需要努力争取尽量使用Wi-Fi来传递数据。
我们可以使用Broadcast Receiver来监听当网络连接切换为Wi-Fi，这个时候我们可以进行大量的数据传递操作，例如下载，执行定时的更新操作，甚至是在这个时候加大更新的频率。这些内容都可以在前面的课程中找到。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/android-training-transferring-data-without-draining-the-battery-lesson-4/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/android-training-transferring-data-without-draining-the-battery-lesson-1/">Android Training - 优化下载效率(Lesson 1 - 用有效率的网络访问方式来优化下载)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-25T16:54:00+08:00" pubdate data-updated="true">Mar 25<span>th</span>, 2012</time>
        
         | <a href="/android-training-transferring-data-without-draining-the-battery-lesson-1/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在这一章，我们将学习为了最小化某些操作对电量的影响是如何处理下载，网络连接，尤其是无线电连接的。
下面几节课会演示了如何使用缓存caching，轮询polling，预取prefetching等技术来计划与执行下载操作。
我们还会学习无线电波的power-use属性配置是如何影响我们对于在何时，用什么，以何种方式来传输数据的选择。
当然这些选择是为了最小化对电池寿命的影响。</p>

<p><strong>Dependencies and prerequisites</strong><br/>
Android 2.0 (API Level 5) or higher</p>

<p><strong>You should also read</strong><br/>
<a href="http://developer.android.com/training/monitoring-device-state/index.html">Optimizing Battery Life</a></p>

<h2>Lessons</h2>

<ul>
<li><strong>Optimizing Downloads for Efficient Network Access[使用有效的网络连接方式来最优化下载]</strong><br/>
This lesson introduces the wireless radio state machine, explains how your app’s connectivity model interacts with it, and how you can minimize your data connection and use prefetching and bundling to minimize the battery drain associated with your data transfers.</li>
</ul>


</div>
  
  
    <footer>
      <a rel="full-article" href="/android-training-transferring-data-without-draining-the-battery-lesson-1/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/22/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/20/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/android-dev-camera-basics/">Android相机开发 - 1)基础概览篇</a>
      </li>
    
      <li class="post">
        <a href="/android-performance-patterns-season-6/">Android性能优化典范 - 第6季</a>
      </li>
    
      <li class="post">
        <a href="/google-io-2016/">Google I/O 2016随笔</a>
      </li>
    
      <li class="post">
        <a href="/android-performance-patterns-season-5/">Android性能优化典范 - 第5季</a>
      </li>
    
      <li class="post">
        <a href="/android-performance-patterns-season-4/">Android性能优化典范 - 第4季</a>
      </li>
    
      <li class="post">
        <a href="/android-dev-patterns/">Android开发最佳实践</a>
      </li>
    
      <li class="post">
        <a href="/android-performance-oom/">Android内存优化之OOM</a>
      </li>
    
      <li class="post">
        <a href="/android-performance-patterns-season-3/">Android性能优化典范 - 第3季</a>
      </li>
    
  </ul>
</section>

<section>
<h1>Categories</h1>
<ul>
  <li><a href='/blog/categories/android'>Android (101)</a></li>
  <li><a href='/blog/categories/android-deeper'>Android:deeper (2)</a></li>
  <li><a href='/blog/categories/android-notes'>Android:notes (10)</a></li>
  <li><a href='/blog/categories/android-performance'>Android:performance (22)</a></li>
  <li><a href='/blog/categories/android-training'>Android:training (75)</a></li>
  <li><a href='/blog/categories/google'>Google (1)</a></li>
  <li><a href='/blog/categories/java'>Java (1)</a></li>
  <li><a href='/blog/categories/life'>Life (1)</a></li>
</ul>
</section>


<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/kesenhoo">@kesenhoo</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'kesenhoo',
            count: 6,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2018 - HuKai -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> - 本站作品采用 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享 署名-非商业性使用-相同方式共享 4.0 国际 许可协议</a>进行许可.</span> 
  
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'kesenhoo';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
